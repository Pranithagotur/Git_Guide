<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>{{ profile.name }} | GitHub Summary</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f8f8f8;
      margin: 0;
      padding: 20px;
    }

    .container {
      max-width: 1000px;
      margin: auto;
      background: #fff;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    .profile {
      display: flex;
      align-items: center;
      gap: 20px;
      margin-bottom: 30px;
    }

    .profile img {
      border-radius: 50%;
      width: 100px;
      height: 100px;
    }

    .profile-details h2 {
      margin: 0;
      font-size: 24px;
    }

    .charts {
      display: flex;
      flex-wrap: wrap;
      gap: 30px;
      margin-top: 30px;
    }

    canvas {
      background: #fdfdfd;
      border: 1px solid #eee;
      border-radius: 8px;
    }

    .projects, .recommendations {
      margin-top: 40px;
    }

    .project-card {
      padding: 15px;
      border: 1px solid #ddd;
      border-radius: 10px;
      margin-bottom: 15px;
    }

    .recommendations ul {
      padding-left: 20px;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="profile">
      <img src="{{ profile.avatar_url }}" alt="Avatar">
      <div class="profile-details">
        <h2>{{ profile.name }}</h2>
        <p><strong>Repos:</strong> {{ profile.repos }} |
           <strong>Followers:</strong> {{ profile.followers }} |
           <strong>Gists:</strong> {{ profile.gists }} |
           <strong>Last Active:</strong> {{ profile.last_active }}</p>
      </div>
    </div>

    <div class="charts">
      <div>
        <h3>Language Usage</h3>
        <canvas id="langChart" width="300" height="300"></canvas>
      </div>

      <div>
        <h3>Recent Commit Activity</h3>
        <canvas id="activityChart" width="500" height="300"></canvas>
      </div>
    </div>

    <div class="projects">
      <h3>Top Projects</h3>
      {% for proj in top_projects %}
        <div class="project-card">
          <h4><a href="{{ proj.url }}" target="_blank">{{ proj.name }}</a></h4>
          <p>{{ proj.description }}</p>
          <p>‚≠ê {{ proj.stars }} | üç¥ {{ proj.forks }} | üõ†Ô∏è {{ proj.language }}</p>
        </div>
      {% endfor %}
    </div>

    <div class="recommendations">
      <h3>Smart Recommendations</h3>
      <ul>
        {% for rec in recommendations %}
          <li>{{ rec }}</li>
        {% endfor %}
      </ul>
    </div>
  </div>

  <script>
    // Language Chart
    const langData = {
    labels: {{ languages|map(attribute='0')|list }},
      datasets: [{
        label: "Languages",
        data: {{ languages|map(attribute='1')|list }},
        backgroundColor: [
          "#FF6384", "#36A2EB", "#FFCE56", "#8E44AD", "#2ECC71", "#E67E22"
        ]
      }]
    };

    new Chart(document.getElementById('langChart'), {
      type: 'pie',
      data: langData
    });

    // Activity Chart
    const activityData = {
      labels: {{ activity|map(attribute='0')|list }},
      datasets: [{
        label: 'Commits per Day',
        data: {{ activity|map(attribute='1')|list }},
        backgroundColor: '#3498db'
      }]
    };

    new Chart(document.getElementById('activityChart'), {
      type: 'bar',
      data: activityData,
      options: {
        scales: {
          x: { title: { display: true, text: 'Date' } },
          y: { beginAtZero: true, title: { display: true, text: 'Commits' } }
        }
      }
    });
  </script>
</body>
</html>
